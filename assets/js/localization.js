const translations = {
    "ru": {
        "title": "L2ReviverBot | Твой идеальный помощник в Lineage 2",
        "description": "L2ReviverBot — революционная платформа для полной автоматизации вашего игрового процесса в Lineage 2 через Telegram.",
        "og_title": "L2ReviverBot | Автоматизация Lineage 2",
        "og_description": "Забудьте о рутинной проверке персонажей. Управляйте армией аккаунтов через Telegram.",
        "nav_features": "Возможности",
        "nav_integration": "Интеграция",
        "nav_advantages": "Преимущества",
        "nav_start": "Начать Сейчас",
        "hero_title_prefix": "Твой идеальный помощник в мире",
        "hero_title_suffix": "Lineage 2",
        "hero_subtitle": "Полная автоматизация игрового процесса через Telegram. Забудьте о рутине — доверьте фарм профессиональному софту.",
        "hero_btn_primary": "Попробовать Бесплатно",
        "hero_btn_secondary": "Узнать Больше",
        "features_title_prefix": "Безграничные",
        "features_title_suffix": "Возможности",
        "feature_1_title": "Любой Сервер",
        "feature_1_desc": "Поддержка любого сервера с Telegram-ботом. Мы понимаем язык игровых серверов так же хорошо, как и вы.",
        "feature_2_title": "Быстрая Интеграция",
        "feature_2_desc": "Подключение нового сервера занимает всего 1-2 часа. Полная настройка и боевое тестирование.",
        "feature_3_title": "Автоматизация 24/7",
        "feature_3_desc": "Авто-резурекшн, возврат на спот, умный выбор телепорта. Бот работает, пока вы отдыхаете.",
        "feature_4_title": "Армия Персонажей",
        "feature_4_desc": "Запускайте 5, 10 или 20 окон. Наблюдайте за всей армией через одну удобную панель управления.",
        "integration_title_prefix": "Интеллектуальное",
        "integration_title_suffix": "Реагирование",
        "integration_item_1_title": "Мгновенная реакция",
        "integration_item_1_desc": "Срабатывание за доли секунды после любого события.",
        "integration_item_2_title": "Умный рандом",
        "integration_item_2_desc": "Случайный выбор точек телепорта имитирует живого игрока.",
        "integration_item_3_title": "Безопасность",
        "integration_item_3_desc": "Поведение максимально приближено к человеческому.",
        "mockup_log_1": "Character died.",
        "mockup_log_2": "Initiating resurrection sequence...",
        "mockup_log_3": "Resurrection successful.",
        "mockup_log_4": "Teleporting to spot: Dragon Valley (Randomized)",
        "mockup_log_5": "Farming resumed.",
        "cta_title_prefix": "Начни",
        "cta_title_suffix": "Доминировать",
        "cta_title_end": "Сегодня",
        "cta_text": "L2ReviverBot превращает Lineage 2 из работы в удовольствие. Минимум усилий, максимум профита.",
        "cta_btn": "Получить Бот",
        "footer_rights": "© 2024 L2ReviverBot. All rights reserved."
    },
    "ua": {
        "title": "L2ReviverBot | Твій ідеальний помічник у Lineage 2",
        "description": "L2ReviverBot — революційна платформа для повної автоматизації вашого ігрового процесу в Lineage 2 через Telegram.",
        "og_title": "L2ReviverBot | Автоматизація Lineage 2",
        "og_description": "Забудьте про рутинну перевірку персонажів. Керуйте армією акаунтів через Telegram.",
        "nav_features": "Можливості",
        "nav_integration": "Інтеграція",
        "nav_advantages": "Переваги",
        "nav_start": "Почати Зараз",
        "hero_title_prefix": "Твій ідеальний помічник у світі",
        "hero_title_suffix": "Lineage 2",
        "hero_subtitle": "Повна автоматизація ігрового процесу через Telegram. Забудьте про рутину — довірте фарм професійному софту.",
        "hero_btn_primary": "Спробувати Безкоштовно",
        "hero_btn_secondary": "Дізнатися Більше",
        "features_title_prefix": "Безмежні",
        "features_title_suffix": "Можливості",
        "feature_1_title": "Будь-який Сервер",
        "feature_1_desc": "Підтримка будь-якого сервера з Telegram-ботом. Ми розуміємо мову ігрових серверів так само добре, як і ви.",
        "feature_2_title": "Швидка Інтеграція",
        "feature_2_desc": "Підключення нового сервера займає всього 1-2 години. Повне налаштування та бойове тестування.",
        "feature_3_title": "Автоматизація 24/7",
        "feature_3_desc": "Авто-резурекшн, повернення на спот, розумний вибір телепорту. Бот працює, поки ви відпочиваєте.",
        "feature_4_title": "Армія Персонажів",
        "feature_4_desc": "Запускайте 5, 10 або 20 вікон. Спостерігайте за всією армією через одну зручну панель керування.",
        "integration_title_prefix": "Інтелектуальне",
        "integration_title_suffix": "Реагирование",
        "integration_item_1_title": "Миттєва реакція",
        "integration_item_1_desc": "Спрацювання за частки секунди після будь-якої події.",
        "integration_item_2_title": "Розумний рандом",
        "integration_item_2_desc": "Випадковий вибір точок телепорту імітує живого гравця.",
        "integration_item_3_title": "Безпека",
        "integration_item_3_desc": "Поведінка максимально наближена до людської.",
        "mockup_log_1": "Character died.",
        "mockup_log_2": "Initiating resurrection sequence...",
        "mockup_log_3": "Resurrection successful.",
        "mockup_log_4": "Teleporting to spot: Dragon Valley (Randomized)",
        "mockup_log_5": "Farming resumed.",
        "cta_title_prefix": "Почни",
        "cta_title_suffix": "Домінувати",
        "cta_title_end": "Сьогодні",
        "cta_text": "L2ReviverBot перетворює Lineage 2 з роботи на задоволення. Мінімум зусиль, максимум профіту.",
        "cta_btn": "Отримати Бот",
        "footer_rights": "© 2024 L2ReviverBot. All rights reserved."
    },
    "en": {
        "title": "L2ReviverBot | Your ideal assistant in Lineage 2",
        "description": "L2ReviverBot is a revolutionary platform for full automation of your Lineage 2 gameplay via Telegram.",
        "og_title": "L2ReviverBot | Lineage 2 Automation",
        "og_description": "Forget about routine character checking. Manage an army of accounts via Telegram.",
        "nav_features": "Features",
        "nav_integration": "Integration",
        "nav_advantages": "Advantages",
        "nav_start": "Start Now",
        "hero_title_prefix": "Your ideal assistant in the world of",
        "hero_title_suffix": "Lineage 2",
        "hero_subtitle": "Full gameplay automation via Telegram. Forget the routine — trust the farming to professional software.",
        "hero_btn_primary": "Try For Free",
        "hero_btn_secondary": "Learn More",
        "features_title_prefix": "Limitless",
        "features_title_suffix": "Possibilities",
        "feature_1_title": "Any Server",
        "feature_1_desc": "Support for any server with a Telegram bot. We understand the language of game servers as well as you do.",
        "feature_2_title": "Fast Integration",
        "feature_2_desc": "Connecting a new server takes only 1-2 hours. Full setup and battle testing.",
        "feature_3_title": "24/7 Automation",
        "feature_3_desc": "Auto-resurrection, return to spot, smart teleport selection. The bot works while you rest.",
        "feature_4_title": "Army of Characters",
        "feature_4_desc": "Launch 5, 10, or 20 windows. Monitor the entire army through one convenient dashboard.",
        "integration_title_prefix": "Intelligent",
        "integration_title_suffix": "Response",
        "integration_item_1_title": "Instant Reaction",
        "integration_item_1_desc": "Triggering within fractions of a second after any event.",
        "integration_item_2_title": "Smart Random",
        "integration_item_2_desc": "Random teleport point selection mimics a real player.",
        "integration_item_3_title": "Safety",
        "integration_item_3_desc": "Behavior is as close to human as possible.",
        "mockup_log_1": "Character died.",
        "mockup_log_2": "Initiating resurrection sequence...",
        "mockup_log_3": "Resurrection successful.",
        "mockup_log_4": "Teleporting to spot: Dragon Valley (Randomized)",
        "mockup_log_5": "Farming resumed.",
        "cta_title_prefix": "Start",
        "cta_title_suffix": "Dominating",
        "cta_title_end": "Today",
        "cta_text": "L2ReviverBot turns Lineage 2 from work into pleasure. Minimum effort, maximum profit.",
        "cta_btn": "Get Bot",
        "footer_rights": "© 2024 L2ReviverBot. All rights reserved."
    }
};

function setLanguage(lang) {
    if (!translations[lang]) {
        console.warn(`Language '${lang}' not found, falling back to 'en'.`);
        lang = 'en';
    }

    document.documentElement.lang = lang;
    const t = translations[lang];

    // Update Meta tags
    document.title = t.title;
    document.querySelector('meta[name="description"]')?.setAttribute('content', t.description);
    document.querySelector('meta[property="og:title"]')?.setAttribute('content', t.og_title);
    document.querySelector('meta[property="og:description"]')?.setAttribute('content', t.og_description);

    // Update Text Content
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (t[key]) {
            element.textContent = t[key];
        }
    });

    // Special handling for elements with nested spans or formatting

    // Hero Title
    const heroTitle = document.querySelector('.hero-title');
    if (heroTitle && t.hero_title_prefix && t.hero_title_suffix) {
        // Preserving the span structure
        heroTitle.innerHTML = `${t.hero_title_prefix} <span class="gradient-text">${t.hero_title_suffix}</span>`;
    }

    // Features Title
    const featuresTitle = document.querySelector('.features-section .section-title');
    if (featuresTitle && t.features_title_prefix && t.features_title_suffix) {
        featuresTitle.innerHTML = `${t.features_title_prefix} <span class="accent-text">${t.features_title_suffix}</span>`;
    }

    // Integration Title
    const integrationTitle = document.querySelector('.integration-section .section-title');
    if (integrationTitle && t.integration_title_prefix && t.integration_title_suffix) {
        integrationTitle.innerHTML = `${t.integration_title_prefix} <span class="gradient-text">${t.integration_title_suffix}</span>`;
    }

    // CTA Title
    const ctaTitle = document.querySelector('#cta .section-title');
    if (ctaTitle && t.cta_title_prefix && t.cta_title_suffix) {
        ctaTitle.innerHTML = `${t.cta_title_prefix} <span class="accent-text">${t.cta_title_suffix}</span>${t.cta_title_end ? ' ' + t.cta_title_end : ''}`;
    }

    // Update active class on header buttons
    document.querySelectorAll('.header-lang-btn').forEach(btn => {
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
}

// Browser detection
function detectLanguage() {
    const browserLang = navigator.language.slice(0, 2).toLowerCase();
    const validLangs = ['ru', 'ua', 'en'];
    if (validLangs.includes(browserLang)) {
        return browserLang;
    }
    return 'en'; // Default
}

// Init
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('selectedLanguage');

    // Function to handle language selection
    const handleSelection = (lang) => {
        localStorage.setItem('selectedLanguage', lang);
        setLanguage(lang);
    };

    // Add listeners to header buttons
    document.querySelectorAll('.header-lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang');
            handleSelection(lang);
        });
    });

    if (savedLang) {
        setLanguage(savedLang);
    } else {
        const lang = detectLanguage();
        setLanguage(lang);
    }
});

// Export for debugging
window.setLanguage = setLanguage;
